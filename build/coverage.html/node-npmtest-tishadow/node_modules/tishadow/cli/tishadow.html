<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-tishadow/node_modules/tishadow/cli/tishadow</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-tishadow">npmtest-tishadow (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-tishadow/node_modules/tishadow/cli/tishadow</span></h1>
    <h2>
        
        Statements: <span class="metric">2.6% <small>(2 / 77)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 38)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 13)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">2.67% <small>(2 / 75)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-tishadow/node_modules/tishadow/cli/</a> &#187; tishadow</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">//#!/usr/bin/env node
/*
 * Copyright (c) 2011-2014 YY Digital Pty Ltd. All Rights Reserved.
 * Please see the LICENSE file included with this distribution for details.
 */
&nbsp;
var api            = require('./support/api'),
    compiler       = require('./support/compiler'),
    colors         = require('colors'),
    config         = require('./support/config'),
    logger         = require("../server/logger.js"),
    pkginfo        = require('pkginfo'),
    program        = require('commander'),
    fs             = require('fs'),
    path           = require('path'),
    spawn          = require('./support/spawn'),
    updateNotifier = require('update-notifier'),
    chokidar       = require('chokidar'),
    _ = require("underscore");
&nbsp;
// check if watch enabled
<span class="cstat-no" title="statement not covered" >var at_index = process.argv.indexOf("@");</span>
<span class="cstat-no" title="statement not covered" >config.isWatching = false;</span>
<span class="cstat-no" title="statement not covered" >if (at_index &gt; -1) {</span>
<span class="cstat-no" title="statement not covered" >  config.isWatching = true;</span>
<span class="cstat-no" title="statement not covered" >  process.argv.splice(at_index,1);</span>
}
&nbsp;
&nbsp;
<span class="cstat-no" title="statement not covered" >pkginfo(module, 'name', 'version');</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >program</span>
  .version(module.exports.version, '-v, --version')
  .description('TiShadow CLI')
  .usage('COMMAND [OPTIONS]');
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('server')</span>
  .description('start the TiShadow server'.grey)
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-l, --long-polling', 'force long polling')
  .option('-i, --internal-ip &lt;internal-ip&gt;', 'internal ip to bind to')
  .option('-s, --screenshot-path &lt;screenshot-path&gt;', 'path to save screenshot (defaults to /tmp)')
  .option('-z, --manage-versions', 'manage and automatically update bundles')
  .action(<span class="fstat-no" title="function not covered" >function(env) {</span>
    // run package notifier but only on server command.
<span class="cstat-no" title="statement not covered" >    var notifier = updateNotifier({</span>
      packagePath: "../package.json",
//      updateCheckInterval: 1000 * 60 * 60 * 24 * 7 // 1 week
    });
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (notifier.update) {</span>
<span class="cstat-no" title="statement not covered" >      notifier.notify();</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    config.init(env);</span>
<span class="cstat-no" title="statement not covered" >    require("../server/app.js");</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('clear')</span>
  .description('clear the application cache on all connected devices'.grey)
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .option('-P, --platform &lt;platform&gt;', 'target platform')
  .action(api.clearCache);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('run')</span>
  .description('deploy full application to all connected devices'.grey)
  .option('-u, --update', 'only send recently changed files')
  .option('-a, --patch', 'patch updated files without causing app restart')
  .option('-i, --inspector', 'enable automatic inspection and spies')
  .option('-l, --locale &lt;locale&gt;', 'set the locale in in the TiShadow app')
  .option('-j, --jshint', 'analyse code with JSHint')
  .option('-t, --tail-logs', 'tail server logs on deploy')
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .option('-s, --skip-alloy-compile', 'skip automatic alloy compilation')
  .option('-f, --alloy-compile-file &lt;filename&gt;', 'compile only one alloy file')
  .option('-P, --platform &lt;platform&gt;', 'target platform')
  .option('-D, --include-dot-files', 'includes dot files in the bundle (defaults to false)')
  .option('-T, --target &lt;app_name&gt;', 'target TiShadow app (defaults to name on tiapp.xml or moduleid on manifest)')
  .option('-c, --ticommonjs', 'support for applications using the ti-commonjs library')
  .action(compiler);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('deploy')</span>
  .description('deploy full application to the server without pushing'.grey)
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .option('-s, --skip-alloy-compile', 'skip automatic alloy compilation')
  .option('-D, --include-dot-files', 'includes dot files in the bundle (defaults to false)')
  .action(compiler);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('bundle')</span>
  .description('prepare a TiShadow bundle without deploying it'.grey)
  .option('-s, --skip-alloy-compile', 'skip automatic alloy compilation')
  .option('-D, --include-dot-files', 'includes dot files in the bundle (defaults to false)')
  .option('-j, --jshint', 'analyse code with JSHint')
  .action(compiler);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('spec')</span>
  .description('run jasmin spec tests on all connected devices'.grey)
  .option('-u, --update', 'only send recently changed files')
  .option('-l, --locale &lt;locale&gt;', 'set the locale in in the TiShadow app')
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .option('-t, --type &lt;type&gt;', 'testing library')
  .option('-j, --jshint', 'analyse code with JSHint')
  .option('-x, --junit-xml','output report as JUnit XML')
  .option('-P, --platform &lt;platform&gt;', 'target platform')
  .option('-s, --skip-alloy-compile', 'skip automatic alloy compilation')
  .option('-f, --alloy-compile-file &lt;filename&gt;', 'compile only one alloy file')
  .option('-D, --include-dot-files', 'includes dot files in the bundle (defaults to false)')
  .option('-T, --target &lt;app_name&gt;', 'target TiShadow app (defaults to name on tiapp.xml or moduleid on manifest)')
  .option('-C, --clear-spec-files', 'clears only the spec files from the cache')
  .option('-c, --coverage &lt;report_types&gt;', 'runs code coverage, for available report_types see https://github.com/gotwarlost/istanbul#the-report-command')
  .action(compiler);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('close')</span>
  .description('close the running app on the device'.grey)
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .option('-P, --platform &lt;platform&gt;', 'target platform')
  .action(api.closeApp);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('repl')</span>
  .description('launch REPL'.grey)
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .option('-i, --pipe', 'pipe to repl')
  .option('-P, --platform &lt;platform&gt;', 'target platform')
  .action(api.sendSnippet);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('screenshot')</span>
  .description('capture screenshots of all connected devices'.grey)
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .option('-s, --screencast &lt;interval&gt;', 'screencast mode, interval in ms')
  .option('-x, --scale &lt;ratio&gt;', 'ratio (as decimal) to scale screenshot')
  .option('-P, --platform &lt;platform&gt;', 'target platform')
  .action(api.screenshot);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('log')</span>
  .description('tail server logs'.grey)
  .option('-o, --host &lt;host&gt;', 'server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'server port')
  .option('-r, --room &lt;room&gt;', 'server room')
  .action(<span class="fstat-no" title="function not covered" >function(env) {</span>
<span class="cstat-no" title="statement not covered" >    config.init(env);</span>
<span class="cstat-no" title="statement not covered" >    require('./support/socket').connect();</span>
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('config')</span>
  .description('set default configuration settings'.grey)
  .option('-o, --host &lt;host&gt;', 'set default server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'set default server port')
  .option('-r, --room &lt;room&gt;', 'set default server room')
  .option('-i, --inspector', 'enable automatic inspection and spies')
  .option('-u, --use-appc-CLI', 'use the appcelerator cli')
  .option('-b, --boost', 'use super fast selective alloy compilation')
  .option('-t, --type &lt;type&gt;', 'default testing library')
  .option('-w, --watch-delay &lt;millis&gt;',    'time to wait before responding to for changes (default: 0)')
  .option('-i, --watch-interval &lt;millis&gt;', 'time to wait between checking files for changes (default: 100)')
  .option('-x, --watch-exclude &lt;glob&gt;', 'files to exclude from watch')
  .option('-n, --network-interface &lt;interface&gt;', 'set default network interface (used in express mode)')
  .action(config.write);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('app')</span>
  .description('generate a titanium project with TiShadow app source code'.grey)
  .option('-d, --destination &lt;path&gt;', 'target path for generated project')
  .option('-u, --upgrade', 'upgrade an existing tishadow app')
  .action(<span class="fstat-no" title="function not covered" >function(env) {</span>
<span class="cstat-no" title="statement not covered" >    if (env.upgrade) {</span>
<span class="cstat-no" title="statement not covered" >      require('./support/appify').copyCoreProject(env);</span>
    } else {
<span class="cstat-no" title="statement not covered" >      program.prompt("Enter app id [com.yydigital.tishadowapp]: ", <span class="fstat-no" title="function not covered" >function(appid) {</span></span>
<span class="cstat-no" title="statement not covered" >        env.appid = appid.trim() || "com.yydigital.tishadowapp";</span>
<span class="cstat-no" title="statement not covered" >        require('./support/appify').copyCoreProject(env);</span>
<span class="cstat-no" title="statement not covered" >        process.stdin.destroy();</span>
      });
    }
  });
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('appify')</span>
  .description('generate an appified TiShadow app'.grey)
  .option('-d, --destination &lt;path&gt;', 'target path for generated project')
  .option('-o, --host &lt;host&gt;', 'set server host name / ip address')
  .option('-p, --port &lt;port&gt;', 'set server port')
  .option('-r, --room &lt;room&gt;', 'set server room')
  .option('-m, --modify-app-id', 'appends .appifed to the applicatin id')
  .option('-P, --platform &lt;platform&gt;', 'target platform')
  .action(require('./support/appify').build);
&nbsp;
<span class="cstat-no" title="statement not covered" >program.command('express')</span>
  .description('install a titanium cli command plugin `shadow` for simple tishadow development')
  .action(<span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    var hooks = spawn('ti', ['config','paths.hooks','-a',path.join( __dirname ,'..', 'plugin','yy.tishadow','1.0','hooks')]);</span>
<span class="cstat-no" title="statement not covered" >    hooks.stderr.pipe(process.stderr);</span>
<span class="cstat-no" title="statement not covered" >    hooks.on("exit", <span class="fstat-no" title="function not covered" >function(code) {</span></span>
<span class="cstat-no" title="statement not covered" >      code === 0 &amp;&amp; logger.info("Titanium CLI hook installed. Now use the `--shadow` flag when buliding your project for express tishadow development");</span>
    });
  });
&nbsp;
<span class="fstat-no" title="function not covered" >function execute(filenames) {</span>
<span class="cstat-no" title="statement not covered" >  var argv = process.argv.slice(0);</span>
<span class="cstat-no" title="statement not covered" >  if(program.args &amp;&amp; program.args[0]) {</span>
<span class="cstat-no" title="statement not covered" >    program.args[0].alloyCompileFile =config.alloyCompileFile =  undefined;</span>
  }
<span class="cstat-no" title="statement not covered" >  if ((argv[2] === "run" || argv[2] === "spec") &amp;&amp; filenames &amp;&amp; !_.find(filenames, <span class="fstat-no" title="function not covered" >function(f){</span> <span class="cstat-no" title="statement not covered" >return f.match(/app.tss$/)}</span>) ) {</span>
<span class="cstat-no" title="statement not covered" >    argv.push("-f");</span>
<span class="cstat-no" title="statement not covered" >    argv.push(filenames.join(','));</span>
  }
<span class="cstat-no" title="statement not covered" >  program.parse(argv);</span>
  // Display help on an invalid command
<span class="cstat-no" title="statement not covered" >  if (program.args.length === 0 || typeof program.args[program.args.length -1] === 'string'){</span>
<span class="cstat-no" title="statement not covered" >    program.help();</span>
  }
}
&nbsp;
<span class="cstat-no" title="statement not covered" >if (config.isWatching) {</span>
<span class="cstat-no" title="statement not covered" >  config.buildPaths({},<span class="fstat-no" title="function not covered" >function() {</span></span>
<span class="cstat-no" title="statement not covered" >    var paths = [config.isAlloy ? "app" :"Resources"];</span>
<span class="cstat-no" title="statement not covered" >    if(!config.isAlloy1_8_later &amp;&amp; fs.existsSync(path.join(config.base, 'i18n'))){</span>
<span class="cstat-no" title="statement not covered" >      paths.push('i18n');</span>
    }
<span class="cstat-no" title="statement not covered" >    if (config.isSpec) {</span>
<span class="cstat-no" title="statement not covered" >      paths.push('spec');</span>
    }
<span class="cstat-no" title="statement not covered" >    paths = paths.map(<span class="fstat-no" title="function not covered" >function(p) {</span></span>
<span class="cstat-no" title="statement not covered" >      return path.join(p,"**/*");</span>
    });
<span class="cstat-no" title="statement not covered" >    if (config.watchExclude) {</span>
<span class="cstat-no" title="statement not covered" >      config.watchExclude.split(",").forEach(<span class="fstat-no" title="function not covered" >function(g) {</span></span>
<span class="cstat-no" title="statement not covered" >        paths.push("!" + g.trim());</span>
      });
    }
<span class="cstat-no" title="statement not covered" >    var ready = false;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    var changedFiles = [];</span>
<span class="cstat-no" title="statement not covered" >    var debouncedExcute = _.debounce(<span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >      execute(changedFiles);</span>
<span class="cstat-no" title="statement not covered" >      changedFiles = [];</span>
    },config.watchDelay);
&nbsp;
<span class="cstat-no" title="statement not covered" >    var watcher = chokidar.watch(paths, {</span>
      interval: config.watchInterval,
      cwd: config.base
    })
    .on('all', <span class="fstat-no" title="function not covered" >function watcher(event, filepath) {</span>
<span class="cstat-no" title="statement not covered" >      if (!ready) {<span class="cstat-no" title="statement not covered" >return}</span>;</span>
<span class="cstat-no" title="statement not covered" >      logger.debug(event + ": " + filepath);</span>
<span class="cstat-no" title="statement not covered" >      changedFiles.push(filepath);</span>
<span class="cstat-no" title="statement not covered" >      debouncedExcute();</span>
    })
    .on('ready', ()=&gt; {
<span class="cstat-no" title="statement not covered" >      logger.debug("watcher ready")</span>
<span class="cstat-no" title="statement not covered" >      ready=true</span>
    });
  });
<span class="cstat-no" title="statement not covered" >  api.startRepl();</span>
}
&nbsp;
<span class="cstat-no" title="statement not covered" >execute();</span>
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Sat Apr 22 2017 12:46:18 GMT+0000 (UTC)</div>
</div>
</body>
</html>
